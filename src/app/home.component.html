<!-- home.component.html -->
<div class="home-page-container">
  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <h1>MPloyCheck</h1>

      <nav *ngIf="user" class="user-navigation">
        <span class="user-info">{{ user.name }} ({{ user.email }})</span>
        <button class="btn btn-secondary" (click)="logout()">Logout</button>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Logged Out State -->
    <div *ngIf="!user; else loggedIn" class="content-card auth-prompt-card">
      <p class="prompt-text">
        Please sign in or create an account to get started.
      </p>
      <div class="auth-actions">
        <button class="btn btn-primary" (click)="navigateToSignup()">
          Sign Up
        </button>
        <button class="btn btn-secondary" (click)="navigateToSignin()">
          Sign In
        </button>
      </div>
    </div>

    <!-- Logged In State -->
    <ng-template #loggedIn>
      <div class="content-card welcome-dashboard">
        <h2>Welcome, {{ user.name }}!</h2>

        <!-- Job Offers Dashboard Section -->
        <div class="dashboard-content job-dashboard">
          <h3>Your Job Offers</h3>

          <!-- Loading State -->
          <div *ngIf="isLoadingJobs" class="loading-message">
             Loading job offers...
          </div>

          <!-- Error State -->
          <div *ngIf="jobFetchError && !isLoadingJobs" class="error-message dashboard-error">
            {{ jobFetchError }}
          </div>

          <!-- Job Offers Table (only if not loading and no error) -->
          <div *ngIf="!isLoadingJobs && !jobFetchError" class="table-container">
            <!-- Message if no jobs found -->
            <p *ngIf="jobOffers.length === 0" class="no-data-message">
              You currently have no job offers saved.
            </p>

            <!-- The Table -->
            <table *ngIf="jobOffers.length > 0" class="job-offers-table">
              <thead>
                <tr>
                  <th>Job Title</th>
                  <th>Company</th>
                  <th>Location</th>
                  <th>Salary</th>
                  <th>Status</th>
                  <th>Description</th>
                  <th>Date Added</th>
                </tr>
              </thead>
              <tbody>
                <!-- Use index for delete splice if needed, but prefer job.id -->
                <tr *ngFor="let job of jobOffers; let i = index">
                  <td>{{ job.jobTitle }}</td>
                  <td>{{ job.companyName }}</td>
                  <td>{{ job.location }}</td>
                  <td>{{ job.salary | currency:'USD':'symbol':'1.0-0' }}</td> <!-- Basic currency format -->
                  <td><span class="status-badge" [ngClass]="job.status">{{ job.status }}</span></td>
                  <td class="description-cell">{{ job.description }}</td>
                  <td>{{ job.createdAt | date:'shortDate' }}</td> <!-- Basic date format -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </main>

  <!-- Optional Footer -->
  <!--
  <footer class="app-footer">
    <p>Â© 2023 MPloyCheck. All rights reserved.</p>
  </footer>
  -->
</div>